
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../C%2B%2B/Automated%20unit%20test%20with%20catch2/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Howto Code reviews - brain</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#code-reviews" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="brain" class="md-header__button md-logo" aria-label="brain" data-md-component="logo">
      
  <img src="../attachments/brain.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            brain
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Howto Code reviews
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="brain" class="md-nav__button md-logo" aria-label="brain" data-md-component="logo">
      
  <img src="../attachments/brain.png" alt="logo">

    </a>
    brain
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Howto Code reviews
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Howto Code reviews
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#everyone" class="md-nav__link">
    Everyone
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#having-your-code-reviewed" class="md-nav__link">
    Having Your Code Reviewed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reviewing-code" class="md-nav__link">
    Reviewing Code
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          C++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../C%2B%2B/Automated%20unit%20test%20with%20catch2/" class="md-nav__link">
        Automated unit test with catch2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Git/Git%20installation%20and%20basics/" class="md-nav__link">
        Git installation and basics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          R
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          R
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Debugging%20R%20Packages/" class="md-nav__link">
        Debugging R Packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/How%20to%20setup%20a%20project%20%28Research%20compendium%29/" class="md-nav__link">
        How to setup a project (Research compendium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Install%20and%20setup%20R%2C%20RStudio%2C%20Rcpp/" class="md-nav__link">
        Install and setup R, RStudio, Rcpp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Rcpp%20Links/" class="md-nav__link">
        Rcpp Links
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Run%20scripts%20in%20RStudio%20as%20background%20jobs/" class="md-nav__link">
        Run R-scripts in RStudio as background jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Set%20PATH%20environment%20variable%20for%20R%20and%20Rtools%20in%20/" class="md-nav__link">
        Set PATH environment variable for R and RTools in Windows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Setup%20Qt%20Creator%20to%20develop%20Rcpp/" class="md-nav__link">
        [[Rcpp]] and [[Qt Creator]]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Setup%20an%20R-Package%20with%20Rcpp%20in%20RStudio/" class="md-nav__link">
        Setup an R-Package with Rcpp in RStudio
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
      
      
      
        <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
          Packages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          Packages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Packages/renv%20R%20package/" class="md-nav__link">
        renv R package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../R/Packages/targets%20R%20package/" class="md-nav__link">
        targets R package
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#everyone" class="md-nav__link">
    Everyone
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#having-your-code-reviewed" class="md-nav__link">
    Having Your Code Reviewed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reviewing-code" class="md-nav__link">
    Reviewing Code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="code-reviews">Code reviews<a class="headerlink" href="#code-reviews" title="Permanent link">&para;</a></h1>
<p>Code reviews are essential for high quality code. Also they are a great opportunity to share knowledge, all participants. Good code reviews can be lots of effort, but they take your code to the next level, not only because of the outside view and fresh ideas but also because you write just better code when you know that others will review it later. Code reviews should always go over manageable parts, i.e. individual program features. Avoid code reviews of thousands of lines of code from several program parts. This is frustrating for both the reviewer and the reviewee.</p>
<p>Code reviews can be done either in writing or, especially for shorter reviews or when there is still a lot of explanation needed, directly together on the screen. This howto is specifically about written code reviews.</p>
<p>Code reviews are often done within a merge request on GitHub or GitLab, where code reviews are built into the merge request. Otherwise, you must first decide how to perform the code review.</p>
<p>For example, you can write your annotations directly as comments in the code. Then you should use unique markers so that the reviewee can find your comments quickly with the search function. I use, e.g., simply my initials, in C++ <code>// SH: ...</code>. Of course, it is important to stay consistent and not suddenly write <code>//SH ...</code>, otherwise comments might get lost.</p>
<p>Another option is to use an external text document. I prefer Markdown here because it is effortless to insert code sections. I then divide the text document into sections: the first section contains general comments, the second section includes comments on the user interface. After that, each file I review gets its own section. Finally, I write the corresponding line number in the code before each comment. But of course, you can't add comments in the code itself because this would change the line numbers. So you have to decide on one option.</p>
<p>Code reviews are not trivial and can contain some pitfalls. The perhaps most important to be aware of: it can be <a href="https://thoughtbot.com/blog/empathy-online">challenging to communicate emotion and intention online</a>.</p>
<p>It is helpful to understand that there are three perspectives to a code review: (i) of the person who wrote the code, (ii) of the reviewer, and (iii) of the team. During a code review, you should keep all three perspectives in mind, whether you are the reviewer or the reviewee. Here are some hints and ideas to consider for each of the perspectives:</p>
<p>(the following part is mostly copied from <a href="https://github.com/thoughtbot/guides/tree/main/code-review">guides/code-review at main Â· thoughtbot/guides</a>)</p>
<h2 id="everyone">Everyone<a class="headerlink" href="#everyone" title="Permanent link">&para;</a></h2>
<ul>
<li>Accept that many programming decisions are opinions. Discuss tradeoffs, which you prefer, and reach a resolution quickly.</li>
<li>Ask good questions; don't make demands. ("What do you think about naming this <code>:user_id</code>?")</li>
<li>Good questions avoid judgment and avoid assumptions about the author's perspective.</li>
<li>Ask for clarification. ("I didn't understand. Can you clarify?")</li>
<li>Avoid selective ownership of code. ("mine", "not mine", "yours")</li>
<li>Assume everyone is intelligent and well-meaning. Avoid using terms that could be seen as referring to personal traits. ("dumb", "stupid").</li>
<li>Be explicit. Remember people don't always understand your intentions online.</li>
<li>Be humble. ("I'm not sure - let's look it up.")</li>
<li>Don't use hyperbole. ("always", "never", "endlessly", "nothing")</li>
<li>Don't use sarcasm.</li>
<li>Keep it real. If emoji, animated gifs, or humor aren't you, don't force them. If they are, use them with aplomb.</li>
<li>Talk synchronously (e.g. chat, screen-sharing, in person) if there are too many "I didn't understand" or "Alternative solution:" comments. Post a follow-up comment summarizing the discussion.</li>
</ul>
<h2 id="having-your-code-reviewed">Having Your Code Reviewed<a class="headerlink" href="#having-your-code-reviewed" title="Permanent link">&para;</a></h2>
<ul>
<li>Be grateful for the reviewer's suggestions. ("Good call. I'll make that change.")</li>
<li>Be aware that it can be <a href="https://thoughtbot.com/blog/empathy-online">challenging to convey emotion and intention online</a></li>
<li>Have only "finished" code reviewed. Finished means that you are not able or have no idea on how to further improve the code.</li>
<li>Delete all commented code and unused before the review.  </li>
<li>Comments make it easier for the reviewer to understand your code. Comments give context and explain why the code exists, they are not a description of what the code itself does. ("It's like that because of these reasons. Would it be more clear if I rename this class/file/method/variable?")</li>
<li>Seek to understand the reviewer's perspective.</li>
<li>Try to respond to every comment.</li>
</ul>
<h2 id="reviewing-code">Reviewing Code<a class="headerlink" href="#reviewing-code" title="Permanent link">&para;</a></h2>
<p>Understand why the change is necessary (fixes a bug, improves the user experience, refactors the existing code). Then:</p>
<ul>
<li>Communicate which ideas you feel strongly about and those you don't ("I think this is important, because ...", "I'd prefer it to ...,  but I think that is personal preference").</li>
<li>Identify ways to simplify the code while still solving the problem.</li>
<li>If discussions turn too philosophical or academic, move the discussion offline to a regular Friday afternoon technique discussion. In the meantime, let the author make the final decision on alternative implementations.</li>
<li>Offer alternative implementations, but assume the author already considered them. ("What do you think about using ... here?")</li>
<li>Seek to understand the author's perspective.</li>
</ul>
<hr />
<p>References:
Related:</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b78d2936.min.js"></script>
      
    
  </body>
</html>